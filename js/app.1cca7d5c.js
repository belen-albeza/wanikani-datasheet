(function(e){function t(t){for(var n,s,u=t[0],c=t[1],i=t[2],p=0,f=[];p<u.length;p++)s=u[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,i||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,u=1;u<r.length;u++){var c=r[u];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e._m(0),r("main",[r("router-view")],1),e._m(1)])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("h1",[e._v("ðŸ¦€ Wanikani Datasheet")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("footer",[r("p",[e._v("Crafted with ðŸ–¤ by ladybenko.")])])}],s=(r("5c0b"),r("2877")),u={},c=Object(s["a"])(u,o,a,!1,null,null,null),i=c.exports,l=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("article",[e.user.username||e.isLoading?e._e():r("TokenInput",e._b({},"TokenInput",e.api,!1)),e.user.username?r("UserTag",e._b({},"UserTag",e.user,!1)):e._e(),e.progression?r("Progression",{attrs:{progression:e.progression}}):e._e(),e.isLoading?r("p",[e._v("Loadingâ€¦")]):e._e()],1)},f=[],h=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),d=r("2f62"),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("h2",[e._v("Level progression")]),r("h3",[e._v("Current level")]),r("p",[e._v(" Level "+e._s(e.currentLevel.level)+" ("+e._s(e.currentLevel.levelTime.days)+" days, "+e._s(e.currentLevel.levelTime.hours)+" hours) ")]),r("h3",[e._v("All levels")]),e._l(e.progression,(function(t){return r("ul",{key:t.level,staticClass:"level-list"},[r("li",[r("ProgressionItem",e._b({},"ProgressionItem",t,!1))],1)])}))],2)},m=[];function b(e,t){var r=Math.floor((e-t)/1e3),n=Math.floor(r/86400),o=Math.floor(r%86400/3600);return{days:n,hours:o}}var g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("details",{staticClass:"level"},[r("summary",[e._v("Level "+e._s(e.level)+" ("+e._s(e.levelTime.days)+" days, "+e._s(e.levelTime.hours)+" hours) ")]),r("ul",[r("li",[e._v("Unlocked at: "+e._s(e.unlockedAt.toLocaleString("en-GB")))]),r("li",[e._v(" Passed at: "+e._s(e.passedAt?e.passedAt.toLocaleString("en-GB"):"in progress")+" ")])])])},_=[],y=(r("a9e3"),{name:"ProgressionItem",props:{level:{type:Number,required:!0},unlockedAt:{type:Date,required:!0},passedAt:Date},computed:{levelTime:function(){var e=this.passedAt||new Date;return b(e,this.unlockedAt)}}}),O=y,w=Object(s["a"])(O,g,_,!1,null,null,null),k=w.exports,j={name:"Progression",components:{ProgressionItem:k},props:{progression:Array},computed:{currentLevel:function(){var e=this.progression[this.progression.length-1],t=e.passedAt||new Date,r=b(t,e.unlockedAt);return Object.assign({},e,{levelTime:r})}}},P=j,x=(r("d7ac"),Object(s["a"])(P,v,m,!1,null,"9813c066",null)),T=x.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitToken(t)}}},[r("p",[r("label",[e._v("Input your "),r("a",{attrs:{href:"https://www.wanikani.com/settings/personal_access_tokens",rel:"external"}},[e._v(" API token")]),e._v("."),r("br"),r("input",{attrs:{type:"text",name:"userToken",placeholder:"2607fff0-7f0f-4615-ad88-1d3c24ecc3da",required:"",size:"36"},domProps:{value:e.token}})]),r("button",[e._v("Submit")])]),e.error?r("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e()])},S=[],D={props:{error:String,token:String},methods:{onSubmitToken:function(e){var t=e.target.userToken.value;this.$store.dispatch("updateToken",t)}}},E=D,I=(r("9df4"),Object(s["a"])(E,A,S,!1,null,"0c9f2425",null)),R=I.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[r("b",[e._v(e._s(e.username))]),e._v(", level "+e._s(e.level)+" ")])},U=[],$={name:"UserTag",props:{username:String,level:Number}},F=$,M=Object(s["a"])(F,L,U,!1,null,null,null),C=M.exports;function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={name:"datasheet",components:{Progression:T,TokenInput:R,UserTag:C},computed:B({},Object(d["b"])(["api","user","progression"]),{isLoading:function(){return this.shallFetchUser||this.shallFetchProgression},shallFetchUser:function(){return this.api.token&&!this.user.username&&!this.api.error},shallFetchProgression:function(){return this.api.token&&this.user.username&&null===this.progression&&!this.api.error}}),watch:{shallFetchProgression:function(){this.shallFetchProgression&&this.$store.dispatch("fetchProgression")}},mounted:function(){this.shallFetchUser&&this.$store.dispatch("fetchUserData")}},z=G,J=Object(s["a"])(z,p,f,!1,null,null,null),N=J.exports;n["a"].use(l["a"]);var W=[{path:"/",name:"datasheet",component:N}],H=new l["a"]({mode:"history",base:"/",routes:W}),K=H,Q=(r("d81d"),r("96cf"),r("1da1"));r("99af"),r("d3b7");function V(e,t){var r="https://api.wanikani.com/v2/".concat(t),n=new Headers({"Wanikani-Revision":"20170710",Authorization:"Bearer ".concat(e)});return new Request(r,{method:"GET",headers:n})}function X(e,t){return Y.apply(this,arguments)}function Y(){return Y=Object(Q["a"])(regeneratorRuntime.mark((function e(t,r){var n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=V(t,r),e.prev=1,e.next=4,fetch(n);case 4:return o=e.sent,e.next=7,o.json();case 7:if(a=e.sent,!a.error){e.next=10;break}throw 401===a.code?"".concat(a.code,": Invalid token"):"".concat(a.code,": ").concat(a.error);case 10:return e.abrupt("return",Array.isArray(a.data)?a.data.map((function(e){return e.data})):a.data);case 13:throw e.prev=13,e.t0=e["catch"](1),console.error(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Y.apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return ee=Object(Q["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"user"));case 1:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return re=Object(Q["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",X(t,"level_progressions"));case 1:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){Object(h["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n["a"].use(d["a"]);var ae={api:{token:localStorage.getItem("token")||null,error:""},user:{username:null,level:0},progression:null},se={updateToken:function(e,t){e.api=oe({},e.api,{token:t,error:""})},updateAPIError:function(e,t){e.api=oe({},e.api,{error:t})},updateUser:function(e,t){var r=t.username,n=t.level;e.user={username:r,level:n}},updateProgression:function(e,t){e.progression=t}},ue={updateToken:function(){var e=Object(Q["a"])(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,e.next=4,Z(r);case 4:o=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),n("updateAPIError",e.t0);case 10:o&&(n("updateToken",r),n("updateUser",o),localStorage.setItem("token",r));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));function t(t,r){return e.apply(this,arguments)}return t}(),fetchUserData:function(){var e=Object(Q["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,o=n.api.token,e.prev=2,e.next=5,Z(o);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),r("updateAPIError",e.t0);case 11:a&&r("updateUser",a);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}(),fetchProgression:function(){var e=Object(Q["a"])(regeneratorRuntime.mark((function e(t){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,n=t.state,o=n.api.token,e.prev=2,e.next=5,te(o);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),r("updateAPIError",e.t0);case 11:a&&(console.log(a),a=a.filter((function(e){return null===e.abandoned_at})).map((function(e){return{level:e.level,unlockedAt:new Date(e.unlocked_at),passedAt:e.passed_at?new Date(e.passed_at):null}})),r("updateProgression",a));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));function t(t){return e.apply(this,arguments)}return t}()},ce=new d["a"].Store({state:ae,mutations:se,actions:ue,modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:K,store:ce,render:function(e){return e(i)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),o=r.n(n);o.a},7780:function(e,t,r){},"9c0c":function(e,t,r){},"9df4":function(e,t,r){"use strict";var n=r("ad5e"),o=r.n(n);o.a},ad5e:function(e,t,r){},d7ac:function(e,t,r){"use strict";var n=r("7780"),o=r.n(n);o.a}});
//# sourceMappingURL=app.1cca7d5c.js.map